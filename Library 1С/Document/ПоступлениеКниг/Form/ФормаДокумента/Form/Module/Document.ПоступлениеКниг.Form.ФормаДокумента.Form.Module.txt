
&НаКлиенте
Процедура КнигиКодОбработкаВыбора(Элемент, ВыбранноеЗначение, СтандартнаяОбработка)
	Книга = НайтиКнигу(ВыбранноеЗначение);
	Элементы.Книги.ТекущиеДанные.Название = Книга[0];
	Элементы.Книги.ТекущиеДанные.Автор = Книга[1];
КонецПроцедуры

&НаСервере
Функция НайтиКнигу(Код)
	Книга = Справочники.Книги.НайтиПоКоду(Код);
	Массив = Новый Массив(2);
	Массив[0] = Книга.Наименование;
	Массив[1] = Книга.Автор;
	Возврат Массив;
КонецФункции

&НаКлиенте
Процедура КнигиКодПриИзменении(Элемент)
	Элементы.Книги.ТекущийЭлемент = Элементы.КнигиКоличество;
	ОчисткаПоля(Элементы.Книги.ТекущиеДанные.Количество);
КонецПроцедуры

&НаКлиенте
Процедура КнигиВидПриИзменении(Элемент)
	ОчисткаПоля(Элементы.Книги.ТекущиеДанные.Название);
	ОчисткаПоля(Элементы.Книги.ТекущиеДанные.Автор);
	ОчисткаПоля(Элементы.Книги.ТекущиеДанные.Количество);
КонецПроцедуры

&НаКлиенте
Процедура ОчисткаПоля(Поле)
	Если Поле <> "" Тогда
		Поле = "";
	КонецЕсли; 
КонецПроцедуры

&НаКлиенте
Процедура ОчисткаПоляКоличество(Количество)
	Если Количество <> 0 Тогда
		Количество = 0;
	КонецЕсли; 
КонецПроцедуры

&НаКлиенте
Процедура КнигиСекторПриИзменении(Элемент)
	ОчисткаПоля(Элементы.Книги.ТекущиеДанные.Название);
	ОчисткаПоля(Элементы.Книги.ТекущиеДанные.Автор);
	ОчисткаПоля(Элементы.Книги.ТекущиеДанные.Количество);
КонецПроцедуры

&НаКлиенте
Процедура ПередЗаписью(Отказ, ПараметрыЗаписи)
	Если (Объект.Книги.Количество() = 0) Тогда
		Отказ = Истина;
		Сообщить("Количество строк должно быть ненулевым");
	КонецЕсли;
КонецПроцедуры

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	Если (Объект.Дата = '00010101') Тогда 
		Объект.Дата = ТекущаяДата();
	КонецЕсли;
КонецПроцедуры

&НаКлиенте
Процедура ПриОткрытии(Отказ)
	ТекущийЭлемент = Элементы.Книги;
КонецПроцедуры
