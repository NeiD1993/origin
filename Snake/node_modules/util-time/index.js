"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var Timer=function(){function t(){this.callback=null,this.beginnigTime=null,this.pastTime=null,this.stopPoint=null,this.duration=null,this.totalTime=null,this.timer=null,this.running=!1}return Object.defineProperty(t.prototype,"timestamp",{get:function(){return+new Date-this.beginnigTime},enumerable:!0,configurable:!0}),t.prototype.start=function(t,i){if(this.running&&this.reset(),"function"!=typeof i)throw new TypeError("Callback function is not function.");if("number"!=typeof t)throw new TypeError("Duration must be number.");this.callback=i,this.duration=t>0?t:-t,this.totalTime=this.duration,this.pastTime=0,this._updateTimer(),this.running=!0,this.stopPoint=this.beginnigTime=+new Date},t.prototype.reset=function(){clearTimeout(this.timer),this.running=!1,this.callback=this.duration=this.pastTime=this.beginnigTime=this.stopPoint=this.totalTime=null},t.prototype.pause=function(t){if(void 0!==t&&"number"!=typeof t)throw new TypeError("Delay must be number.");this.running&&(clearTimeout(this.timer),this._updatePastTime(),this.duration=this.totalTime-this.pastTime,this.running=!1,void 0!==t&&setTimeout(this.continue.bind(this),t))},t.prototype.add=function(t){if("number"!=typeof t)throw new TypeError("Amount must be number.");this.running&&(clearTimeout(this.timer),this.running=!1,this.totalTime+=t,this._updatePastTime(),this.duration=this.totalTime-this.pastTime,this.continue())},t.prototype.reduce=function(t){if("number"!=typeof t)throw new TypeError("Amount must be number.");if(this.running){clearTimeout(this.timer),this.running=!1;var i=this.totalTime-t;this.totalTime=i>0?i:this.totalTime,this._updatePastTime(),this.duration=this.totalTime-this.pastTime,this.continue()}},t.prototype.continue=function(){!this.running&&this.callback&&(this.stopPoint=+new Date,this._updateTimer(),this.running=!0)},t.prototype._updatePastTime=function(){this.pastTime+=+new Date-(this.stopPoint?this.stopPoint:this.timestamp),this.stopPoint=+new Date},t.prototype._updateTimer=function(){var t=this;this.timer=setTimeout(function(){t.callback(t.timestamp),t.reset()},this.duration)},t}();exports.Timer=Timer;var Interval=function(){function t(){this.callback=null,this.interval=null,this.timer=null,this.count=null,this.currCount=null,this.running=!1}return t.prototype.start=function(t,i,n){if(this.running&&this.reset(),"function"!=typeof i)throw new TypeError("Callback function must be function.");if("number"!=typeof t)throw new TypeError("Interval must be number.");if(void 0!==n&&"number"!=typeof n)throw new TypeError("Count must be number.");this.interval=t>0?t:-t,this.callback=i,this.currCount=0,this.count=0===n?1:n,this._updateInterval(),this.running=!0},t.prototype.reset=function(){clearInterval(this.timer),this.running=!1,this.interval=this.callback=this.count=this.currCount=null},t.prototype.pause=function(t){if(void 0!==t&&"number"!=typeof t)throw new TypeError("Delay must be number");clearInterval(this.timer),this.running=!1,void 0!==t&&setTimeout(this.continue.bind(this),t)},t.prototype.continue=function(){this._updateInterval(),this.running=!0},t.prototype.add=function(t){if("number"!=typeof t)throw new TypeError("Amount must be number.");this.count+=t},t.prototype.reduce=function(t){if("number"!=typeof t)throw new TypeError("Amount must be number.");this.count-=t},t.prototype._updateInterval=function(){var t=this;this.count?this.timer=setInterval(function(){t.currCount++,t.callback(t.currCount),t.currCount===t.count&&t.reset()},this.interval):this.timer=setInterval(this.callback,this.interval)},t}();exports.Interval=Interval;